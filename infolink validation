(function ($, Granite) {
    "use strict";

    $(document).on("dialog-ready", function () {
        $(".cq-dialog-dropdown-showhide").each(function () {
            var $dropdown = $(this);

            // Attach change event handler
            $dropdown.on("change", function () {
                var $parent = $dropdown.closest(".coral-Multifield-item");
                var value = $dropdown.val();

                // Toggle visibility based on the selected value
                $parent.find(".cq-dialog-dropdown-showhide-target").each(function () {
                    var $target = $(this);
                    if ($target.hasClass(value)) {
                        $target.removeClass("hide");
                    } else {
                        $target.addClass("hide");
                    }
                });
            });

            // Trigger change event on dialog load to set the correct state
            $dropdown.trigger("change");
        });
    });
})(jQuery, Granite);


$(document).on('change', '[name$="newTagText"]', function() {
    var $multifield = $(this).closest('.cq-dialog-multifield');
    // Ensure only the newly selected multifield is updated
    $multifield.find('.newTag').show();
});


$(document).ready(function() {
    // Ensure each multifield behaves independently
    $('.cq-dialog-multifield').each(function() {
        var $multifield = $(this);

        $multifield.find('select[name$="publicationFrequency"]').on('change', function() {
            var $newTagText = $multifield.find('.newTagText');
            if ($(this).val() === 'SomeValue') { // Change this to your condition
                $newTagText.show();
            } else {
                $newTagText.hide();
            }
        });
    });
});

