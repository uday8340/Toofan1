(function(document, $, Coral) {
    "use strict";

    // Wait for the content to be fully loaded before initializing
    $(document).on("foundation-contentloaded", function(e) {
        // Iterate over each element with the class .cmp-list_editor
        $(".cmp-list_editor coral-select.cq-dialog-dropdown-showhide", e.target).each(function() {
            var $element = $(this);
            var target = $element.data("cq-dialog-dropdown-showhide-target");

            if (target) {
                // Initialize the Coral component for the dropdown
                Coral.commons.ready($element[0], function(component) {
                    // Call showHide function whenever the component changes
                    component.on("change", function() {
                        showHide(component, target);
                    });

                    // Initial show/hide action for the current state of the dropdown
                    showHide(component, target);
                });
            }
        });
    });

    // Function to show/hide the new tag field based on the dropdown value
    function showHide(component, target) {
        var value = component.value;
        var $target = $(target);

        // Hide all target elements first
        $target.not(".hide").addClass("hide");

        // Show the specific target element based on the selected value
        $target.filter("[data-showhidetargetvalue='" + value + "']").removeClass("hide");
    }

    // Wait for the document to be ready before applying any tooltips
    $(document).ready(function() {
        // Apply tooltips for truncated lines, if needed
        addTooltipIfTruncatedLines(".line-clamp");
    });
})(document, Granite.$, Coral);
