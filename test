(function($, $document) {
    "use strict";

    $document.on("foundation-contentloaded", function(e) {
        // Custom Email Validation
        $.validator.register({
            selector: "[data-validation='emailValidation']",
            validate: function(value) {
                // Basic email structure check (presence of @)
                var emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

                // Check for special characters or spaces
                var invalidCharsPattern = /[^a-zA-Z0-9@._-]/;

                if (!emailPattern.test(value)) {
                    return "Invalid email syntax.";
                }

                if (invalidCharsPattern.test(value)) {
                    return "Email should not contain spaces or special characters.";
                }

                // Validate the domain (after @)
                var domainPart = value.split('@')[1];
                if (domainPart && domainPart.split('.').length < 2) {
                    return "Invalid domain name format.";
                }

                return null; // Valid email
            }
        });
    });

})(jQuery, jQuery(document));
